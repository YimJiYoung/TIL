# The Transport Layer

네트워크 계층은 한 엔드 시스템에서 다른 엔드 시스템으로 메시지를 전송하는 역할을 하고, 전송 계층은 엔드 시스템에서 실행되는 애플리케이션에서 애플리케이션으로의 전송하는 역할을 한다.

### TCP
- 메시지(세그먼트)를 신뢰성있게, 순서대로 전송한다.
- 패킷이 전송되는 동안 생긴 변경을 감지하고 수정한다.
- 한 번에 적절한 양의 데이터를 보내 트래픽의 양을 조절한다.
- TCP를 사용하는 프로토콜 : HTTP, E-mail, File Transfers

### UDP
- 메시지(데이터그램)이 순서대로 전송되는 것을 보장하지 않는다. (데이터가 보내지는 것 또한 보장하지 않음. 신뢰성 X)
- 패킷이 전송되는 동안 생긴 변경을 감지하지만 수정하지는 않는다.
- TCP보다 가볍고 빠르다.
- UDP를 사용하는 프로토콜: Domain Name System (DNS), live video streaming, and Voice over IP (VoIP).

## 네트워크 계층의 한계
1. 페킷은 전송 오류로 인해 corrupt될 수 있다 → checksum
2. 패킷은 중간에 유실될 수 있다 → retrasmission timer
3. 패킷은 순서가 바뀌거나 중복해서 올 수 있다 → sequence number

### Checksum
패킷은 전송 오류로 손상될 수 있다. 이런 오류를 감지하기 할 수 있도록 전송자는 패킷의 모든 바이트의 합으로 계산된 체크섬을 세그먼트에 포함해서 보낸다. 수신자는 수신한 메세지로 체크섬을 계산하고 세그먼트에 포함된 체크섬과 비교해서 세그먼트가 유효한지 확인한다.

### Retrasmission timer
전송자는 세그먼트를 보낼 때 재전송 타이머를 시작하고 타이머가 끝날 때까지 ack 세그먼트가 오지 않으면 데이터가 유실됐다고 판단하고 해당 세그먼트를 재전송한다.
- 재전송 타이머의 값은 round-trip-time(세그먼트 전송 후 ack 세그먼트가 오기까지의 지연 시간)보다 커야한다.

### Sequence Numbers
전송 계층에서 각 세그먼트는 sequence number로 식별될 수 있다. sequence number는 세그먼트에 포함되어 전송된다.
